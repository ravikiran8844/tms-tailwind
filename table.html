<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <link rel="stylesheet" href="assets/css/tailwind.css" />
  </head>
  <body>
    <div class="my-20 overflow-x-auto px-4">
      <table
        class="main-table border3 table w-full table-fixed border-separate border-spacing-y-4"
      >
        <thead class="bg-black p-4 text-center uppercase text-white">
          <tr>
            <th width="200px">Date</th>
            <th width="200px">Purpose of Trip</th>
            <th width="200px">Location</th>
            <th width="200px">Total Amount Spent</th>
            <th width="200px"></th>
          </tr>
        </thead>

        <tbody id="main-table-body">
          <tr>
            <td colspan="5">
              <table class="table">
                <tr>
                  <td>
                    <div>
                      <input
                        class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
                        type="date"
                        name=""
                        id=""
                      />
                    </div>
                  </td>
                  <td>
                    <div>
                      <input
                        class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
                        type="text"
                        name=""
                        id=""
                        placeholder="Purpose of Trip"
                      />
                    </div>
                  </td>
                  <td>
                    <div>
                      <input
                        class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
                        type="text"
                        name=""
                        id=""
                        placeholder="Enter Location"
                      />
                    </div>
                  </td>
                  <td>
                    <div>
                      <input
                        class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
                        type="text"
                        name=""
                        id=""
                        placeholder="Total Amount Spent"
                      />
                    </div>
                  </td>
                  <td class="flex justify-end">
                    <button
                      class="view-details btn btn-sm gap-0 border-orange-500 bg-white px-4 text-sm text-orange-500 hover:border-orange-500 hover:bg-white"
                      onclick="toggleDetails(1,this)"
                    >
                      View Details

                      <span>
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          viewBox="0 0 20 20"
                          fill="currentColor"
                          class="size-5"
                        >
                          <path
                            fill-rule="evenodd"
                            d="M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z"
                            clip-rule="evenodd"
                          />
                        </svg>
                      </span>
                    </button>
                  </td>
                </tr>
                <tr id="details-row-1" style="display: none">
                  <!-- Initially hidden -->
                  <td colspan="5">
                    <table class="table" id="nested-table-1">
                      <thead class="bg-[#F1F2F6] text-black">
                        <tr>
                          <th>Category</th>
                          <th>Bill Available</th>
                          <th>Bill No</th>
                          <th>Shop Name</th>
                          <th>Amount Spent</th>
                          <th>Upload Bill</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            <select
                              class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
                            >
                              <option value="">Select Category</option>
                              <option value="Breakfast">Breakfast</option>
                              <option value="Lunch">Lunch</option>
                              <option value="Dinner">Dinner</option>
                            </select>
                          </td>
                          <td>
                            <div class="flex items-center">
                              <div class="me-4 flex items-center">
                                <label
                                  class="text-sm font-medium text-gray-900 dark:text-gray-300"
                                >
                                  <input
                                    type="radio"
                                    name="billAvailable-bill-upload-1-1"
                                    value="yes"
                                    class="me-1 h-4 w-4 rounded border-gray-300 bg-gray-100 text-yellow-400 focus:ring-yellow-500"
                                    onclick="toggleFileInput('bill-upload-1-1', true)"
                                  />
                                  Yes
                                </label>
                              </div>
                              <div class="me-4 flex items-center">
                                <label
                                  class="text-sm font-medium text-gray-900 dark:text-gray-300"
                                >
                                  <input
                                    name="billAvailable-bill-upload-1-1"
                                    type="radio"
                                    value="no"
                                    class="me-1 h-4 w-4 rounded border-gray-300 bg-gray-100 text-yellow-400 focus:ring-yellow-500"
                                    onclick="toggleFileInput('bill-upload-1-1', false)"
                                  />
                                  No
                                </label>
                              </div>
                            </div>
                          </td>
                          <td>
                            <input
                              class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
                              type="text"
                              placeholder="Bill No"
                            />
                          </td>
                          <td>
                            <input
                              class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
                              type="text"
                              placeholder="Shop Name"
                            />
                          </td>
                          <td>
                            <input
                              class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
                              type="text"
                              placeholder="Amount Spent"
                            />
                          </td>
                          <td>
                            <div id="bill-upload-1-1" style="display: none">
                              <input
                                class="block w-full rounded-lg border border-gray-300 bg-white text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
                                type="file"
                                id="file-input-1"
                              />
                            </div>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                </tr>
                <tr id="add-receipt-row-1" style="display: none">
                  <!-- Initially hidden -->
                  <td colspan="5">
                    <div>
                      <button
                        onclick="addMoreReceipt(1)"
                        class="flex items-center gap-1 ps-5 text-sm font-semibold text-green-500"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          viewBox="0 0 24 24"
                          fill="currentColor"
                          class="size-6"
                        >
                          <path
                            fill-rule="evenodd"
                            d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z"
                            clip-rule="evenodd"
                          ></path>
                        </svg>
                        <span>Add More Receipt</span>
                      </button>
                    </div>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
        </tbody>
      </table>

      <div class="py-6">
        <button
          onclick="addMoreExpenses()"
          class="flex items-center gap-1 ps-5 text-sm font-semibold text-green-500"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
            class="size-6"
          >
            <path
              fill-rule="evenodd"
              d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z"
              clip-rule="evenodd"
            ></path>
          </svg>
          <span>Add More Expenses</span>
        </button>
      </div>
    </div>

    <script>
      // Toggle visibility of nested table and receipt section
      function toggleDetails(id, button) {
        const detailsRow = document.getElementById(`details-row-${id}`);
        const addReceiptRow = document.getElementById(`add-receipt-row-${id}`);
        const parentTd = detailsRow.closest("td"); // Get the parent td with colspan="5"

        // Toggle visibility of details
        const isVisible = detailsRow.style.display === "table-row";
        detailsRow.style.display = isVisible ? "none" : "table-row";
        addReceiptRow.style.display = isVisible ? "none" : "table-row";

        // Toggle the border on the parent td and all inner elements
        if (!isVisible) {
          parentTd.classList.add("details-border");
          button.classList.add("active"); // Add the 'active' class to the button
        } else {
          parentTd.classList.remove("details-border");
          button.classList.remove("active"); // Remove the 'active' class from the button
        }
      }

      // Function to add more receipt rows inside nested table
      function addMoreReceipt(tableId) {
        const nestedTable = document
          .getElementById(`nested-table-${tableId}`)
          .querySelector("tbody");
        const newRow = document.createElement("tr");
        const uniqueId = `bill-upload-${tableId}-${nestedTable.rows.length + 1}`;

        newRow.innerHTML = `
    <td>
      <select
        class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
      >
        <option value="">Select Category</option>
        <option value="Breakfast">Breakfast</option>
        <option value="Lunch">Lunch</option>
        <option value="Dinner">Dinner</option>
      </select>
    </td>
    <td>
      <div class="flex items-center">
        <div class="me-4 flex items-center">
          <label>
            <input
              type="radio"
              name="billAvailable-${uniqueId}"
              value="yes"
              class="me-1 h-4 w-4 rounded border-gray-300 bg-gray-100 text-yellow-400 focus:ring-yellow-500"
              onclick="toggleFileInput('${uniqueId}', true)"
            /> Yes
          </label>
        </div>
        <div class="me-4 flex items-center">
          <label>
            <input
              type="radio"
              name="billAvailable-${uniqueId}"
              value="no"
              class="me-1 h-4 w-4 rounded border-gray-300 bg-gray-100 text-yellow-400 focus:ring-yellow-500"
              onclick="toggleFileInput('${uniqueId}', false)"
            /> No
          </label>
        </div>
      </div>
    </td>
    <td>
      <input
        class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
        type="text"
        placeholder="Enter Bill No"
      />
    </td>
    <td>
      <input
        class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
        type="text"
        placeholder="Enter Shop Name"
      />
    </td>
    <td>
      <input
        class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
        type="text"
        placeholder="Enter Amount Spent"
      />
    </td>
    <td>
      <input
        id="${uniqueId}"
        class="block w-full rounded-lg border border-gray-300 bg-white text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
        type="file"
        style="display: none"
      />
    </td>
  `;
        nestedTable.appendChild(newRow);
      }

      // Function to dynamically add a new expense row to the main table
      function addMoreExpenses() {
        const mainTableBody = document.getElementById("main-table-body");
        const rowCount = mainTableBody.querySelectorAll("tr").length / 3 + 1; // Calculating row number
        const uniqueId = `bill-upload-${rowCount}-1`;

        const newRow = document.createElement("tr");
        newRow.innerHTML = `
    <td colspan="5">
      <table class="table">
        <tr>
          <td>
            <input
              class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
              type="date"
              placeholder="Select Date"
            />
          </td>
          <td>
            <input
              class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
              type="text"
              placeholder="Purpose of Trip"
            />
          </td>
          <td>
            <input
              class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
              type="text"
              placeholder="Enter Location"
            />
          </td>
          <td>
            <input
              class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
              type="text"
              placeholder="Total Amount Spent"
            />
          </td>
          <td class="flex justify-end">
            <button class="view-details btn btn-sm gap-0 border-orange-500 bg-white px-4 text-sm text-orange-500 hover:border-orange-500 hover:bg-white" onclick="toggleDetails(${rowCount},this)">
              View Details
              <span>
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          viewBox="0 0 20 20"
                          fill="currentColor"
                          class="size-5"
                        >
                          <path
                            fill-rule="evenodd"
                            d="M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z"
                            clip-rule="evenodd"
                          />
                        </svg>
                      </span>
            </button>
          </td>
        </tr>
        <tr id="details-row-${rowCount}" style="display: none;">
          <td colspan="5">
            <table class="table" id="nested-table-${rowCount}">
              <thead class="bg-[#F1F2F6] text-black">
                <tr>
                  <th>Category</th>
                  <th>Bill Available</th>
                  <th>Bill No</th>
                  <th>Shop Name</th>
                  <th>Amount Spent</th>
                  <th>Upload Bill</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <select
                      class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
                    >
                      <option value="">Select Category</option>
                      <option value="Breakfast">Breakfast</option>
                      <option value="Lunch">Lunch</option>
                      <option value="Dinner">Dinner</option>
                    </select>
                  </td>
                  <td>
                    <div class="flex items-center">
                      <div class="me-4 flex items-center">
                        <label>
                          <input
                            type="radio"
                            name="billAvailable-${uniqueId}"
                            value="yes"
                            class="me-1 h-4 w-4 rounded border-gray-300 bg-gray-100 text-yellow-400 focus:ring-yellow-500"
                            onclick="toggleFileInput('${uniqueId}', true)"
                          /> Yes
                        </label>
                      </div>
                      <div class="me-4 flex items-center">
                        <label>
                          <input
                            type="radio"
                            name="billAvailable-${uniqueId}"
                            value="no"
                            class="me-1 h-4 w-4 rounded border-gray-300 bg-gray-100 text-yellow-400 focus:ring-yellow-500"
                            onclick="toggleFileInput('${uniqueId}', false)"
                          /> No
                        </label>
                      </div>
                    </div>
                  </td>
                  <td>
                    <input
                      class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
                      type="text"
                      placeholder="Enter Bill No"
                    />
                  </td>
                  <td>
                    <input
                      class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
                      type="text"
                      placeholder="Enter Shop Name"
                    />
                  </td>
                  <td>
                    <input
                      class="block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
                      type="text"
                      placeholder="Enter Amount Spent"
                    />
                  </td>
                  <td>
                    <input
                      id="${uniqueId}"
                      class="block w-full rounded-lg border border-gray-300 bg-white text-sm text-gray-900 focus:border-orange-500 focus:ring-orange-500"
                      type="file"
                      style="display: none"
                    />
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        <tr id="add-receipt-row-${rowCount}" style="display: none;">
          <td colspan="5">
            <div>
              <button onclick="addMoreReceipt(${rowCount})" class="flex items-center gap-1 ps-5 text-sm font-semibold text-green-500"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
            class="size-6"
          >
            <path
              fill-rule="evenodd"
              d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z"
              clip-rule="evenodd"
            ></path>
          </svg>
          <span>Add More Receipt</span>
        </button>
            </div>
          </td>
        </tr>
      </table>
    </td>
  `;

        mainTableBody.appendChild(newRow);
      }

      // Toggle visibility of file input based on "Bill Available" option
      function toggleFileInput(inputId, isVisible) {
        const fileInput = document.getElementById(inputId);
        fileInput.style.display = isVisible ? "block" : "none";
      }
    </script>
  </body>
</html>
